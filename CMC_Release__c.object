<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>Releases of Products being managed in Project Tracker</description>
    <enableActivities>false</enableActivities>
    <enableEnhancedLookup>false</enableEnhancedLookup>
    <enableFeeds>true</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <fields>
        <fullName>Account_Id__c</fullName>
        <description>&apos;Account Id&apos; of the Account of Product associated with Release.</description>
        <externalId>false</externalId>
        <formula>Product__r.Account__r.Id</formula>
        <label>Account Id</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Account__c</fullName>
        <description>&apos;Account Name&apos; of the Account of Product associated with Release.</description>
        <externalId>false</externalId>
        <formula>Product__r.Account__r.Name</formula>
        <label>Account</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Days_Remaining__c</fullName>
        <description>Days remaining within the release schedule.</description>
        <externalId>false</externalId>
        <formula>If (Target_Date__c &gt; TODAY() ,  Target_Date__c   -  TODAY(), 0)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Days remaining within the release schedule.</inlineHelpText>
        <label>Days Remaining</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Description__c</fullName>
        <description>Description of the release.</description>
        <externalId>false</externalId>
        <inlineHelpText>Description of the release.</inlineHelpText>
        <label>Description</label>
        <length>32000</length>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>LongTextArea</type>
        <visibleLines>3</visibleLines>
    </fields>
    <fields>
        <fullName>Development_Environment__c</fullName>
        <description>Connection to the primary development environment used for this release.  When adding manifest items to stories and issues, metadata from this environment will be displayed.</description>
        <externalId>false</externalId>
        <inlineHelpText>Connection to the primary development environment used for this release.  When adding manifest items to stories and issues, metadata from this environment will be displayed.</inlineHelpText>
        <label>Development Environment</label>
        <referenceTo>CMC_Connection__c</referenceTo>
        <relationshipLabel>Releases</relationshipLabel>
        <relationshipName>Releases</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>External_Id__c</fullName>
        <description>External reference id for this release.</description>
        <externalId>true</externalId>
        <inlineHelpText>External reference id for this release.</inlineHelpText>
        <label>External Id</label>
        <length>18</length>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>OldID__c</fullName>
        <description>source object SFID used at data migration</description>
        <externalId>false</externalId>
        <label>OldID</label>
        <length>18</length>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Pct_Days_Passed__c</fullName>
        <description>Percent of days that have passed within the release schedule.</description>
        <externalId>false</externalId>
        <formula>IF(TODAY() &gt; Target_Date__c, 
    1, 
    IF(TODAY() &lt;= Start_Date__c, 
        0, 
        (TODAY() - Start_Date__c ) / ( Target_Date__c - Start_Date__c ) 
    ) 
)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <inlineHelpText>Percent of days that have passed within the release schedule.</inlineHelpText>
        <label>% Days Passed</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>Product__c</fullName>
        <description>Product for which this release is an update.</description>
        <externalId>false</externalId>
        <inlineHelpText>Product for which this release is an update.</inlineHelpText>
        <label>Product</label>
        <referenceTo>CMC_Product__c</referenceTo>
        <relationshipLabel>Releases</relationshipLabel>
        <relationshipName>Releases</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Project__c</fullName>
        <description>Appirio project (SOW) during which this release is scheduled.</description>
        <externalId>false</externalId>
        <inlineHelpText>Appirio project (SOW) during which this release is scheduled.</inlineHelpText>
        <label>Project</label>
        <referenceTo>pse__Proj__c</referenceTo>
        <relationshipLabel>Releases</relationshipLabel>
        <relationshipName>Releases_Rel</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Release_Date__c</fullName>
        <description>Date when the release is actually ended.</description>
        <externalId>false</externalId>
        <inlineHelpText>Date when the release is actually ended.</inlineHelpText>
        <label>Release Date</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Source_Release__c</fullName>
        <description>Original release from which this release was cloned.</description>
        <externalId>false</externalId>
        <inlineHelpText>Original release from which this release was cloned.</inlineHelpText>
        <label>Source Release</label>
        <referenceTo>CMC_Release__c</referenceTo>
        <relationshipLabel>Cloned As (Releases)</relationshipLabel>
        <relationshipName>Releases</relationshipName>
        <required>false</required>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>false</trackHistory>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Start_Date__c</fullName>
        <description>Date when the release is scheduled to start.</description>
        <externalId>false</externalId>
        <inlineHelpText>Date when the release is scheduled to start.</inlineHelpText>
        <label>Start Date</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <description>Status of the release.</description>
        <externalId>false</externalId>
        <inlineHelpText>Status of the release.</inlineHelpText>
        <label>Status</label>
        <picklist>
            <picklistValues>
                <fullName>Planning</fullName>
                <default>true</default>
            </picklistValues>
            <picklistValues>
                <fullName>Open</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>QA</fullName>
                <default>false</default>
            </picklistValues>
            <picklistValues>
                <fullName>Complete</fullName>
                <default>false</default>
            </picklistValues>
            <sorted>false</sorted>
        </picklist>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Picklist</type>
    </fields>
    <fields>
        <fullName>Target_Date__c</fullName>
        <description>Date when the release is targeted to end.</description>
        <externalId>false</externalId>
        <inlineHelpText>Date when the release is targeted to end.</inlineHelpText>
        <label>Target Date</label>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>Version__c</fullName>
        <description>Optional version number of the release.</description>
        <externalId>false</externalId>
        <inlineHelpText>Optional version number of the release.</inlineHelpText>
        <label>Version</label>
        <length>20</length>
        <required>false</required>
        <trackFeedHistory>true</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <label>Release</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>Product__c</columns>
        <columns>Account__c</columns>
        <columns>RECORDTYPE</columns>
        <columns>Start_Date__c</columns>
        <columns>Target_Date__c</columns>
        <columns>Release_Date__c</columns>
        <columns>Status__c</columns>
        <filterScope>Everything</filterScope>
        <label>All</label>
        <language>en_US</language>
    </listViews>
    <nameField>
        <label>Release Name</label>
        <trackFeedHistory>false</trackFeedHistory>
        <trackHistory>true</trackHistory>
        <type>Text</type>
    </nameField>
    <pluralLabel>Releases</pluralLabel>
    <recordTypeTrackFeedHistory>false</recordTypeTrackFeedHistory>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>Patch</fullName>
        <active>true</active>
        <description>Patch release outside the normal release schedule</description>
        <label>Patch Release</label>
        <picklistValues>
            <picklist>Status__c</picklist>
            <values>
                <fullName>Complete</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Open</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Planning</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>QA</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Planned</fullName>
        <active>true</active>
        <description>Planned release of the product</description>
        <label>Planned Release</label>
        <picklistValues>
            <picklist>Status__c</picklist>
            <values>
                <fullName>Complete</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Open</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Planning</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>QA</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <searchLayouts>
        <customTabListAdditionalFields>Product__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Start_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Target_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Release_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>Status__c</customTabListAdditionalFields>
        <lookupDialogsAdditionalFields>Product__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Start_Date__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Target_Date__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Release_Date__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>Status__c</lookupDialogsAdditionalFields>
        <searchFilterFields>Product__c</searchFilterFields>
        <searchResultsAdditionalFields>Product__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Start_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Target_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Release_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>Status__c</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>Private</sharingModel>
    <sharingReasons>
        <fullName>CMC_Customer__c</fullName>
        <label>CMC Customer</label>
    </sharingReasons>
    <sharingReasons>
        <fullName>CMC_Release_Tenant_Sharing__c</fullName>
        <label>CMC Release Tenant Sharing</label>
    </sharingReasons>
    <sharingReasons>
        <fullName>CMC_Standard__c</fullName>
        <label>CMC Standard</label>
    </sharingReasons>
    <sharingReasons>
        <fullName>CMC_Subcontractor__c</fullName>
        <label>CMC Subcontractor</label>
    </sharingReasons>
    <validationRules>
        <fullName>CMC_MandatoryProductValidation</fullName>
        <active>true</active>
        <description>Make Product a required field on Release</description>
        <errorConditionFormula>ISBLANK(Product__c )</errorConditionFormula>
        <errorDisplayField>Product__c</errorDisplayField>
        <errorMessage>Please select a Product for this Release</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CMC_Project_Acocont_Should_Equal_Product</fullName>
        <active>false</active>
        <description>Projects account should be same as Product account</description>
        <errorConditionFormula>AND(
NOT ISBLANK(Project__c) , 
Project__r.pse__Account__c  &lt;&gt;  Product__r.Account__c 
)</errorConditionFormula>
        <errorDisplayField>Project__c</errorDisplayField>
        <errorMessage>Project&apos;s account should be same as Product&apos;s account</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CMC_ReleaseDateStartDateValidation</fullName>
        <active>true</active>
        <description>Release Date cannot be earlier than Start Date</description>
        <errorConditionFormula>Release_Date__c &lt; Start_Date__c</errorConditionFormula>
        <errorDisplayField>Release_Date__c</errorDisplayField>
        <errorMessage>Release Date cannot be earlier than Start Date</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>CMC_ReleaseDateValidation</fullName>
        <active>true</active>
        <description>Target Date cannot be earlier than Start Date</description>
        <errorConditionFormula>Target_Date__c    &lt;   Start_Date__c</errorConditionFormula>
        <errorDisplayField>Target_Date__c</errorDisplayField>
        <errorMessage>Target Date cannot be earlier than Start Date</errorMessage>
    </validationRules>
    <webLinks>
        <fullName>Cascade_Delete</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Delete</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>//adds the proper code for inclusion of AJAX toolkit 
{!REQUIRESCRIPT(&quot;/soap/ajax/23.0/connection.js&quot;)}
var result = sforce.connection.describeSObject(&quot;CMC_Release__c&quot;); 
var isDeletable = (result.deletable ==&quot;true&quot;); 
var isPortalUser = (sforce.connection.getUserInfo().userType != &quot;Standard&quot;); 
if (isPortalUser  || !isDeletable) { 
    alert(&quot;You don&apos;t have access to delete this record.  Please contact support@appirio.com to request deletion of this record.&quot;); 
}
else{
// Confirmation dialog box 
if(confirm(&apos;Delete this Release and all of its related child records. Are you sure?&apos;)){
    // Session Id of Logged In User
    var sessionId=sforce.connection.sessionId; 
    // server url
    var hosturl = &quot;{!$Setup.CMC_URLs__c.Backend_Host__c}sfcp/p/sfcmd/delete/deep/{!CMC_Release__c.Id}?sessionId=&quot;+sessionId+&quot;&amp;objectName=CMC_Release__c&quot;;
    sforce.connection.remoteFunction({
         url : hosturl,
         mimeType: &quot;text/plain&quot;,
         method: &quot;POST&quot;,
         onSuccess : function(response) {
                  var res = eval(response);
                  if(res[0].status == &quot;ERROR&quot;){
                  // In case of DML Error
                   location.replace(&apos;/apex/CMC_CascadeDeleteResponse?recordId={!CMC_Release__c.Id}&amp;response=&apos;+response); 
                  }
                  else{ 
                  // On success redirect to the Parent product for this Release
                  location.replace(&apos;/{!CMC_Release__c.ProductId__c}&apos;);
                  }
         },
         onFailure : function(response) {
                var code = $(response);
                var isError = true;
                code.each(function() {
                    if( $(this).html() == &apos;400 Unable to forward request due to: Read timed out&apos;){
                        isError = false;
                        alert(&apos;Deletion still in progress. Check back later.&apos;);
                        location.replace(&apos;/{!CMC_Release__c.ProductId__c}&apos;);
                        return false;
                   }
               })
              if(isError  == &apos;true&apos;){
                   location.replace(&apos;/apex/CMC_CascadeDeleteResponse?recordId={!CMC_Release__c.Id}&amp;response=&apos;+response);
               }
         }
    });
// Start Properties
var showDebugMessage = true;
var jQueryLoadAttempts = 0;
var waitProperties = {maxAttempts : 30, maxRestartAttempts: 4, iteration : 100, restartIteration : 1000}
// load JQuery
var staticResources = {jquery : &quot;/resource/CMC_jQuery/jquery/jquery.js&quot;};

 function debugMessage(message){
    if (showDebugMessage){
      if(typeof(console) == &apos;undefined&apos;) { 
        //alert(message);
      } else {
        console.log(message);
      }
    }
  } // end function debugMessage

// ajaxObject function found at: http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS
    function ajaxObject(url, callbackFunction) {
      debugMessage(&quot;Within ajaxObject&quot;);    
      var that=this;      
      this.updating = false;

      this.update = function(passData,postMethod) { 
        if (that.updating==true) { return false; }
        that.updating=true;                       
        var AJAX = null;                          
        if (window.XMLHttpRequest) {              
          AJAX=new XMLHttpRequest();              
        } else {                                  
          AJAX=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);
        }                                             
        if (AJAX==null) {                             
          return false;                               
        } else {
          AJAX.onreadystatechange = function() {  
            if (AJAX.readyState==4) {             
              that.updating=false;                
              that.callback(AJAX.responseText,AJAX.status,AJAX.responseXML);        
              delete AJAX;                                         
            }                                                      
          }                                                        
          var timestamp = new Date();                              
          if (postMethod==&apos;POST&apos;) {
            var uri=urlCall+&apos;?&apos;+timestamp.getTime();
            AJAX.open(&quot;POST&quot;, uri, true);
            AJAX.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);
            AJAX.send(passData);
          } else {
            var uri=urlCall+&apos;?&apos;+passData+&apos;×tamp=&apos;+(timestamp*1); 
            AJAX.open(&quot;GET&quot;, uri, true);                             
            AJAX.send(null);                                         
          }              
          return true;                                             
        }                                                                           
      }
      var urlCall = url;        
      this.callback = callbackFunction || function () { };
    }

function attachjQueryScript(responseText, responseStatus) {
  debugMessage(&quot;Within attachjQueryScript&quot;);
     // This function is called by the ajaxObject when the server has finished 
     // sending us the requested script.  
    if (responseStatus==200) {   
        eval(responseText);    
       validateJQueryLoaded();  
     }
}

      // load jQuery
     var getjQueryScriptViaAjax = new ajaxObject(staticResources.jquery, attachjQueryScript);
     getjQueryScriptViaAjax.update();
	
function validateJQueryLoaded(){
      debugMessage(&quot;Within validateJQueryLoaded&quot;);   
      if(typeof(jQuery) == &apos;undefined&apos;) {
        if (jQueryLoadAttempts &lt; waitProperties.maxAttempts) {
          debugMessage(&quot;jQueryLoadAttempts = &quot; + jQueryLoadAttempts);
          setTimeout(validateJQueryLoaded, (jQueryLoadAttempts++ * waitProperties.iteration));
        } else {
          alert(&quot;Error loading JQuery.  Please refresh the page or try again&quot;);
        }      
      } else {
         debugMessage(&apos;jQuery Loaded&apos;);
        // JQuery Loaded
        $(&quot;body&quot;).append(&quot;&lt;div class=&apos;spinnerMask&apos; id=&apos;spinnerMask&apos; style=&apos;position:fixed;left:0;top:0;background-color:#8d8d8d;height:100%;width:100%;opacity:0.6;filter:alpha(opacity=60);z-index:999;align:center;vertical-align:middle;&apos;&gt;&lt;div style=&apos;position: absolute; top: 35%;left:50%;opacity:1.0;filter:alpha(opacity=100);z-index:1000;background-color:#F5FCFF;width:204; height:94;border-radius:1em;border:1px solid #CEECFF;padding:20px 40px 20px 40px; &apos;&gt;&lt;img src=&apos;/img/analytics/reportbuilder/icons/spinner32.gif&apos; alt=&apos;Processing...&apos; style=&apos;width:32; height:32; align:center;&apos; title=&apos;Processing...&apos; /&gt;&amp;nbsp;&amp;nbsp;&lt;p style=&apos;display:inline;font-size:135%;font-weight:bold;&apos;&gt;Processing...&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&quot;);
      }  
    } // end function validateJQueryLoaded
}
}</url>
    </webLinks>
    <webLinks>
        <fullName>Download_Package</fullName>
        <availability>online</availability>
        <description>Downloads package.xml for this release</description>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Download package.xml</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>location.replace(&apos;{!$Setup.CMC_URLs__c.Backend_Host__c}sfcp/p/sfcmd/deploy/release/packagexml/{!CMC_Release__c.Id}?sessionId={!$Api.Session_ID}&apos;);</url>
    </webLinks>
</CustomObject>
